{"version":3,"file":"admin-themesetting.min.js","sources":["../src/admin-themesetting.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * AMD module\n *\n * @copyright 2025 santoshmagar.com.np\n * @author    santoshtmp7\n * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n *\n */\nimport $ from 'jquery';\n/* global CodeMirror */\n\n/**\n *\n * @param {*} theme_name\n * @param {*} number_fields\n */\nexport const init = (theme_name, number_fields = []) => {\n    if ($('body').hasClass('pagelayout-admin')) {\n\n        theme_setting_tab_panel_title_toggle(theme_name);\n        define_number_fields(theme_name, number_fields);\n        initCodeMirror('id_s_theme_' + theme_name + '_scss', 'css');\n        initCodeMirror('id_s_theme_' + theme_name + '_custom_js', 'javascript');\n\n    }\n};\n\n/**\n *\n * @param {*} theme_name\n */\nfunction theme_setting_tab_panel_title_toggle(theme_name) {\n    let url = new URL(window.location.href);\n    let params = new URLSearchParams(url.search);\n    var query_title_id = params.get('title');\n    $('#page-admin-setting-themesetting' + theme_name + ' #adminsettings .tab-content .tab-pane').each(function () {\n        var h3_title = $(this).find('h3.main');\n        if (h3_title) {\n            let query_title_id_true = false;\n            h3_title.addClass('title-tab-pane-toggle');\n            //\n            h3_title.on('click', function () {\n                $(this).toggleClass(\"open\");\n                $(this).next().toggleClass(\"open\");\n            });\n            h3_title.each(function () {\n                $(this).nextUntil('h3.main').wrapAll('<div class=\"title-tab-pane-content\">');\n                let h3_title_id = 'theme-' + theme_name + '-' + ($(this).text().toLowerCase()).replace(\" \", \"-\");\n                $(this).attr('id', h3_title_id);\n                if (query_title_id == h3_title_id) {\n                    query_title_id_true = true;\n                }\n            });\n            // Add 'open' class to the first h3.main in each tab-pane\n            if (!query_title_id_true) {\n                h3_title.first().addClass('open');\n                h3_title.first().next().addClass('open');\n            } else {\n                $('#' + query_title_id).addClass('open');\n                $('#' + query_title_id).next().addClass('open');\n\n                // Change url to default moodle url\n                let currentUrl = window.location.href;\n                params.delete('title');\n                currentUrl = currentUrl.replace('&title=' + query_title_id, '');\n                window.history.replaceState('', 'url', currentUrl);\n                //\n                setTimeout(function () {\n                    // window.console.log(document.getElementById(query_title_id));\n                    // document.getElementById(query_title_id).scrollIntoView({ behavior: \"smooth\" });\n                    const offset = -100;\n                    const element = document.getElementById(query_title_id);\n                    if (element) {\n                        const elementPosition = element.getBoundingClientRect().top + window.scrollY;\n                        window.scrollTo({ top: elementPosition + offset, behavior: \"smooth\" });\n                    }\n\n                }, 1000);\n            }\n        }\n    });\n\n}\n\n/**\n *\n * @param {*} theme_name\n * @param {*} number_fields\n */\nfunction define_number_fields(theme_name, number_fields) {\n    // Edit input fields with id to number field\n    $.each(number_fields, function (index, value) {\n        if ($('input#id_s_theme_' + theme_name + '_' + value)) {\n            $('input#id_s_theme_' + theme_name + '_' + value).attr('type', 'number');\n            $('input#id_s_theme_' + theme_name + '_' + value).attr('min', 0);\n        }\n    });\n}\n\n/**\n *\n * @param {*} selectorId\n * @param {*} mode\n */\nfunction initCodeMirror(selectorId, mode) {\n    const textarea = document.getElementById(selectorId);\n    if (textarea && typeof CodeMirror !== 'undefined') {\n        CodeMirror.fromTextArea(textarea, {\n            lineNumbers: true,\n            mode: mode,\n            theme: 'material-palenight',\n            autoRefresh: true\n        });\n    }\n}\n\n"],"names":["theme_setting_tab_panel_title_toggle","theme_name","url","URL","window","location","href","params","URLSearchParams","search","query_title_id","get","each","h3_title","this","find","query_title_id_true","addClass","on","toggleClass","next","nextUntil","wrapAll","h3_title_id","text","toLowerCase","replace","attr","currentUrl","delete","history","replaceState","setTimeout","element","document","getElementById","elementPosition","getBoundingClientRect","top","scrollY","scrollTo","behavior","first","define_number_fields","number_fields","index","value","initCodeMirror","selectorId","mode","textarea","CodeMirror","fromTextArea","lineNumbers","theme","autoRefresh","hasClass"],"mappings":";;;;;;;;mJA8CSA,qCAAqCC,gBACtCC,IAAM,IAAIC,IAAIC,OAAOC,SAASC,MAC9BC,OAAS,IAAIC,gBAAgBN,IAAIO,YACjCC,eAAiBH,OAAOI,IAAI,6BAC9B,mCAAqCV,WAAa,0CAA0CW,MAAK,eAC3FC,UAAW,mBAAEC,MAAMC,KAAK,cACxBF,SAAU,KACNG,qBAAsB,KAC1BH,SAASI,SAAS,yBAElBJ,SAASK,GAAG,SAAS,+BACfJ,MAAMK,YAAY,4BAClBL,MAAMM,OAAOD,YAAY,WAE/BN,SAASD,MAAK,+BACRE,MAAMO,UAAU,WAAWC,QAAQ,4CACjCC,YAAc,SAAWtB,WAAa,KAAO,mBAAEa,MAAMU,OAAOC,cAAeC,QAAQ,IAAK,yBAC1FZ,MAAMa,KAAK,KAAMJ,aACfb,gBAAkBa,cAClBP,qBAAsB,MAIzBA,oBAGE,qBACD,IAAMN,gBAAgBO,SAAS,4BAC/B,IAAMP,gBAAgBU,OAAOH,SAAS,YAGpCW,WAAaxB,OAAOC,SAASC,KACjCC,OAAOsB,OAAO,SACdD,WAAaA,WAAWF,QAAQ,UAAYhB,eAAgB,IAC5DN,OAAO0B,QAAQC,aAAa,GAAI,MAAOH,YAEvCI,YAAW,iBAIDC,QAAUC,SAASC,eAAezB,mBACpCuB,QAAS,OACHG,gBAAkBH,QAAQI,wBAAwBC,IAAMlC,OAAOmC,QACrEnC,OAAOoC,SAAS,CAAEF,IAAKF,iBAJZ,IAIsCK,SAAU,cAGhE,UAtBH5B,SAAS6B,QAAQzB,SAAS,QAC1BJ,SAAS6B,QAAQtB,OAAOH,SAAS,qBAiCxC0B,qBAAqB1C,WAAY2C,+BAEpChC,KAAKgC,eAAe,SAAUC,MAAOC,QAC/B,mBAAE,oBAAsB7C,WAAa,IAAM6C,6BACzC,oBAAsB7C,WAAa,IAAM6C,OAAOnB,KAAK,OAAQ,8BAC7D,oBAAsB1B,WAAa,IAAM6C,OAAOnB,KAAK,MAAO,gBAUjEoB,eAAeC,WAAYC,YAC1BC,SAAWhB,SAASC,eAAea,YACrCE,UAAkC,oBAAfC,YACnBA,WAAWC,aAAaF,SAAU,CAC9BG,aAAa,EACbJ,KAAMA,KACNK,MAAO,qBACPC,aAAa,kBA/FL,SAACtD,gBAAY2C,qEAAgB,IACzC,mBAAE,QAAQY,SAAS,sBAEnBxD,qCAAqCC,YACrC0C,qBAAqB1C,WAAY2C,eACjCG,eAAe,cAAgB9C,WAAa,QAAS,OACrD8C,eAAe,cAAgB9C,WAAa,aAAc"}